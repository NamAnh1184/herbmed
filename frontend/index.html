<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HerbMed - Th·∫£o D∆∞·ª£c Vi·ªát | Tra c·ª©u th√¥ng tin y h·ªçc c·ªï truy·ªÅn v√† thu·ªëc T√¢y</title>
    <meta name="description"
        content="Trang web cung c·∫•p th√¥ng tin v·ªÅ c√°c b√†i thu·ªëc th·∫£o d∆∞·ª£c, y h·ªçc c·ªï truy·ªÅn ƒë·ªÉ h·ªó tr·ª£ ƒëi·ªÅu tr·ªã b·ªánh." />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="icon" type="image/x-icon" href="assets/images/common/favicon.png">
    <style>
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
                url('assets/images/common/hero-banner.png');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 80px 20px;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 650px;
            margin: 0 auto 30px;
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-btn {
            padding: 12px 28px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .hero-btn:hover {
            transform: translateY(-2px);
        }

        .hero-btn.primary {
            background: white;
            color: #0a991d;
        }

        .hero-btn.secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        /* Category Grid - New Design */
        .categories {
            padding: 60px 0;
        }

        .section-desc {
            text-align: center;
            color: #64748b;
            margin-bottom: 30px;
            font-size: 1.05rem;
        }

        .cat-grid-new {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .category-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .category-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(10, 153, 29, 0.15);
            border-color: #0a991d;
        }

        .category-header {
            padding: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }

        .category-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #0a991d, #22c55e);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            flex-shrink: 0;
        }

        .category-info h3 {
            margin: 0 0 5px;
            font-size: 1.25rem;
            color: #166534;
        }

        .category-info .count {
            font-size: 0.9rem;
            color: #64748b;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .category-info .count strong {
            color: #0a991d;
        }

        .category-body {
            padding: 20px 25px 25px;
        }

        .category-body p {
            color: #64748b;
            font-size: 0.95rem;
            line-height: 1.5;
            margin: 0 0 15px;
        }

        .disease-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .disease-tag {
            padding: 6px 12px;
            background: #f1f5f9;
            color: #475569;
            border-radius: 20px;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .category-card:hover .disease-tag {
            background: #dcfce7;
            color: #166534;
        }

        .view-more {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 15px;
            color: #0a991d;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .view-more::after {
            content: '‚Üí';
            transition: transform 0.2s;
        }

        .category-card:hover .view-more::after {
            transform: translateX(3px);
        }

        .loading-categories {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #e2e8f0;
            border-top-color: #0a991d;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        @media (max-width: 768px) {
            .cat-grid-new {
                grid-template-columns: 1fr;
            }

            .category-header {
                padding: 20px;
            }

            .category-icon {
                width: 55px;
                height: 55px;
                font-size: 1.5rem;
            }
        }

        /* Features Section */
        .features {
            background: #f8fafc;
            padding: 50px 0;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-top: 25px;
        }

        @media (max-width: 768px) {
            .feature-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0a991d, #15c32a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.5rem;
        }

        .feature-card h3 {
            color: #0a991d;
            margin-bottom: 10px;
        }

        .feature-card p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* Quick Links */
        .quick-links {
            padding: 50px 0;
        }

        .link-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 25px;
        }

        @media (max-width: 768px) {
            .link-grid {
                grid-template-columns: 1fr;
            }
        }

        .link-card {
            display: flex;
            align-items: center;
            gap: 20px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-decoration: none;
            color: inherit;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .link-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        }

        .link-icon {
            width: 50px;
            height: 50px;
            background: #e8f5e9;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .link-card h3 {
            margin: 0 0 5px;
            color: #0a991d;
            font-size: 1rem;
        }

        .link-card p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>

<body>
    <!-- HEADER -->
    <header class="header">
        <div class="header-left">
            <img src="assets/images/common/541994741_24566699099664215_389644405058898715_n.png" alt="logo"
                class="logo" />
            <div>
                <p>HerbMed</p>
                <p>Th·∫£o D∆∞·ª£c Vi·ªát</p>
            </div>
        </div>

        <div class="header-center">
            <div class="header-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="15" fill="currentColor">
                    <path
                        d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414zM0 4.697v7.104l5.803-3.558zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586zm3.436-.586L16 11.801V4.697z" />
                </svg>Nh√≥m 3
            </div>
            <div class="header-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="50" height="15" fill="currentColor">
                    <path
                        d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5" />
                </svg>ICT/DS/CS USTH
            </div>
        </div>

        <div class="header-right">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="T√¨m Ki·∫øm...">
                <button id="searchButton" class="search-btn">T√¨m Ki·∫øm</button>
                <div id="suggestions" class="suggest-box"></div>
            </div>
        </div>
    </header>

    <!-- NAVIGATION -->
    <nav class="navbar">
        <button class="nav__toggle">‚ò∞</button>
        <ul class="nav-left">
            <li><a href="index.html">Trang Ch·ªß</a></li>
            <li class="dropdown">
                <a class="dropbtn" href="pages/benh.html">B·ªánh</a>
                <ul class="dropdown-menu">
                    <li><a href="pages/benh.html">T·∫•t C·∫£ B·ªánh</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a class="dropbtn">ƒêi·ªÅu Tr·ªã</a>
                <ul class="dropdown-menu">
                    <li><a href="pages/treatments/thao-duoc.html">Th·∫£o D∆∞·ª£c</a></li>
                    <li><a href="pages/treatments/thuoc-tay.html">Thu·ªëc T√¢y</a></li>
                </ul>
            </li>
            <li><a href="pages/tai-lieu.html">T√†i Li·ªáu</a></li>
            <li><a href="pages/ve-chung-toi.html">V·ªÅ Ch√∫ng T√¥i</a></li>
        </ul>
        <ul class="nav-right">
            <li><a class="btn white" href="pages/auth/dang-nhap.html">ƒêƒÉng Nh·∫≠p</a></li>
            <li><a class="btn white" href="pages/auth/dang-ky.html">ƒêƒÉng K√Ω</a></li>
        </ul>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero">
        <h1>üåø HerbMed - Th·∫£o D∆∞·ª£c Vi·ªát</h1>
        <p>Tra c·ª©u th√¥ng tin b·ªánh l√Ω v√† ph∆∞∆°ng ph√°p ƒëi·ªÅu tr·ªã b·∫±ng thu·ªëc T√¢y v√† th·∫£o d∆∞·ª£c y h·ªçc c·ªï truy·ªÅn Vi·ªát Nam</p>
        <div class="hero-buttons">
            <a href="pages/benh.html" class="hero-btn primary">Xem danh s√°ch b·ªánh</a>
            <a href="pages/treatments/thao-duoc.html" class="hero-btn secondary">Kh√°m ph√° th·∫£o d∆∞·ª£c</a>
        </div>
    </section>

    <main class="container">
        <!-- DISEASE CATEGORIES - REDESIGNED -->
        <section class="categories" id="categoriesSection">
            <h2 class="section-title">üìã Kh√°m Ph√° Theo Nh√≥m B·ªánh</h2>
            <p class="section-desc">Ch·ªçn nh√≥m b·ªánh ƒë·ªÉ xem danh s√°ch c√°c b·ªánh v√† ph∆∞∆°ng ph√°p ƒëi·ªÅu tr·ªã</p>

            <div class="cat-grid-new" id="categoryGrid">
                <!-- Categories will be loaded dynamically -->
                <div class="loading-categories">
                    <div class="loading-spinner"></div>
                    <p>ƒêang t·∫£i danh m·ª•c...</p>
                </div>
            </div>
        </section>

        <!-- FEATURES -->
        <section class="features">
            <h2 class="section-title">‚ú® T√≠nh NƒÉng</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Tra C·ª©u Nhanh</h3>
                    <p>T√¨m ki·∫øm th√¥ng tin b·ªánh v√† thu·ªëc ƒëi·ªÅu tr·ªã m·ªôt c√°ch nhanh ch√≥ng, ch√≠nh x√°c.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåø</div>
                    <h3>Th·∫£o D∆∞·ª£c</h3>
                    <p>H∆°n 37 lo·∫°i th·∫£o d∆∞·ª£c ph·ªï bi·∫øn v·ªõi c√¥ng d·ª•ng v√† c√°ch s·ª≠ d·ª•ng chi ti·∫øt.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíä</div>
                    <h3>Thu·ªëc T√¢y</h3>
                    <p>Th√¥ng tin v·ªÅ thu·ªëc T√¢y ƒëi·ªÅu tr·ªã c√°c b·ªánh th∆∞·ªùng g·∫∑p, li·ªÅu d√πng v√† l∆∞u √Ω.</p>
                </div>
            </div>
        </section>

        <!-- QUICK LINKS -->
        <section class="quick-links">
            <h2 class="section-title">üîó Truy C·∫≠p Nhanh</h2>
            <div class="link-grid">
                <a class="link-card" href="pages/treatments/thao-duoc.html">
                    <div class="link-icon">üåø</div>
                    <div>
                        <h3>Danh s√°ch Th·∫£o D∆∞·ª£c</h3>
                        <p>Tra c·ª©u 37+ lo·∫°i th·∫£o d∆∞·ª£c y h·ªçc c·ªï truy·ªÅn</p>
                    </div>
                </a>
                <a class="link-card" href="pages/treatments/thuoc-tay.html">
                    <div class="link-icon">üíä</div>
                    <div>
                        <h3>Thu·ªëc T√¢y theo b·ªánh</h3>
                        <p>Ph√¢n lo·∫°i thu·ªëc theo t·ª´ng nh√≥m b·ªánh l√Ω</p>
                    </div>
                </a>
                <a class="link-card" href="pages/tai-lieu.html">
                    <div class="link-icon">üìö</div>
                    <div>
                        <h3>T√†i Li·ªáu Tham Kh·∫£o</h3>
                        <p>Ngu·ªìn th√¥ng tin y khoa uy t√≠n</p>
                    </div>
                </a>
                <a class="link-card" href="pages/ve-chung-toi.html">
                    <div class="link-icon">üë•</div>
                    <div>
                        <h3>V·ªÅ Ch√∫ng T√¥i</h3>
                        <p>Gi·ªõi thi·ªáu nh√≥m ph√°t tri·ªÉn</p>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container footer__inner">
            <div class="footer__brand">¬© <span id="year">2025</span> HerbMed - Th·∫£o D∆∞·ª£c Vi·ªát</div>
            <a class="footer__link" href="pages/ve-chung-toi.html">V·ªÅ ch√∫ng t√¥i</a>
        </div>
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // Category data with icons and descriptions
        const categoryData = {
            1: { icon: 'ü´Å', name: 'H√¥ H·∫•p', desc: 'C√°c b·ªánh li√™n quan ƒë·∫øn ƒë∆∞·ªùng h√¥ h·∫•p nh∆∞ c·∫£m c√∫m, vi√™m ph·ªïi, vi√™m xoang...' },
            2: { icon: 'üß¥', name: 'Da Li·ªÖu', desc: 'C√°c b·ªánh v·ªÅ da nh∆∞ d·ªã ·ª©ng, m·ª•n, n·∫•m da, vi√™m da...' },
            3: { icon: 'üçΩÔ∏è', name: 'Ti√™u H√≥a', desc: 'C√°c b·ªánh d·∫° d√†y, ƒë∆∞·ªùng ru·ªôt nh∆∞ vi√™m d·∫° d√†y, ti√™u ch·∫£y, t√°o b√≥n...' },
            4: { icon: 'üß¨', name: 'N·ªôi Ti·∫øt', desc: 'C√°c b·ªánh r·ªëi lo·∫°n hormone nh∆∞ ti·ªÉu ƒë∆∞·ªùng, tuy·∫øn gi√°p...' },
            5: { icon: '‚ù§Ô∏è', name: 'Tim M·∫°ch', desc: 'C√°c b·ªánh tim v√† m·∫°ch m√°u nh∆∞ cao huy·∫øt √°p, r·ªëi lo·∫°n m·ª° m√°u...' },
            6: { icon: 'ü¶¥', name: 'C∆° X∆∞∆°ng Kh·ªõp', desc: 'C√°c b·ªánh v·ªÅ x∆∞∆°ng kh·ªõp nh∆∞ vi√™m kh·ªõp, lo√£ng x∆∞∆°ng, ƒëau l∆∞ng...' },
            7: { icon: 'üë´', name: 'Sinh D·ª•c', desc: 'C√°c b·ªánh li√™n quan ƒë·∫øn h·ªá sinh d·ª•c nam n·ªØ...' },
            8: { icon: 'üß†', name: 'T√¢m L√Ω - Th·∫ßn Kinh', desc: 'C√°c b·ªánh t√¢m l√Ω nh∆∞ stress, tr·∫ßm c·∫£m, lo √¢u, m·∫•t ng·ªß...' },
            9: { icon: 'üíß', name: 'Ti·∫øt Ni·ªáu', desc: 'C√°c b·ªánh v·ªÅ th·∫≠n v√† ƒë∆∞·ªùng ti·∫øt ni·ªáu...' },
            10: { icon: 'ü¶∑', name: 'RƒÉng Mi·ªáng', desc: 'C√°c b·ªánh v·ªÅ rƒÉng mi·ªáng nh∆∞ vi√™m l·ª£i, s√¢u rƒÉng, h√¥i mi·ªáng...' },
            11: { icon: 'üëÅÔ∏è', name: 'M·∫Øt', desc: 'C√°c b·ªánh v·ªÅ m·∫Øt nh∆∞ kh√¥ m·∫Øt, vi√™m k·∫øt m·∫°c...' }
        };

        // API base URL
        const API_BASE = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:3000/api'
            : '/api';

        // Load categories on page load
        document.addEventListener('DOMContentLoaded', loadCategories);

        async function loadCategories() {
            const grid = document.getElementById('categoryGrid');

            try {
                // Fetch all diseases
                const response = await fetch(`${API_BASE}/benh?limit=1000`);
                const data = await response.json();
                const diseases = data.data || [];

                // Group diseases by category
                const categoryMap = {};
                diseases.forEach(d => {
                    const catId = d.nhombenh_sk;
                    if (!categoryMap[catId]) {
                        categoryMap[catId] = [];
                    }
                    categoryMap[catId].push(d);
                });

                // Render categories
                let html = '';

                // Sort by number of diseases (descending)
                const sortedCats = Object.keys(categoryMap)
                    .filter(id => categoryData[id])
                    .sort((a, b) => categoryMap[b].length - categoryMap[a].length);

                sortedCats.forEach(catId => {
                    const cat = categoryData[catId];
                    const diseases = categoryMap[catId];
                    const count = diseases.length;
                    const previewDiseases = diseases.slice(0, 4);

                    html += `
                        <a class="category-card" href="pages/benh.html?nhombenh_sk=${catId}">
                            <div class="category-header">
                                <div class="category-icon">${cat.icon}</div>
                                <div class="category-info">
                                    <h3>${cat.name}</h3>
                                    <div class="count">
                                        <strong>${count}</strong> b·ªánh trong nh√≥m n√†y
                                    </div>
                                </div>
                            </div>
                            <div class="category-body">
                                <p>${cat.desc}</p>
                                <div class="disease-preview">
                                    ${previewDiseases.map(d => `<span class="disease-tag">${escapeHtml(d.ten_benh)}</span>`).join('')}
                                    ${count > 4 ? `<span class="disease-tag">+${count - 4} b·ªánh kh√°c</span>` : ''}
                                </div>
                                <div class="view-more">Xem t·∫•t c·∫£ ${count} b·ªánh</div>
                            </div>
                        </a>
                    `;
                });

                grid.innerHTML = html || '<p style="text-align:center;color:#64748b;">Kh√¥ng c√≥ d·ªØ li·ªáu</p>';

            } catch (error) {
                console.error('Load categories error:', error);
                // Fallback: render static categories
                grid.innerHTML = Object.entries(categoryData).map(([id, cat]) => `
                    <a class="category-card" href="pages/benh.html?nhombenh_sk=${id}">
                        <div class="category-header">
                            <div class="category-icon">${cat.icon}</div>
                            <div class="category-info">
                                <h3>${cat.name}</h3>
                            </div>
                        </div>
                        <div class="category-body">
                            <p>${cat.desc}</p>
                            <div class="view-more">Xem danh s√°ch b·ªánh</div>
                        </div>
                    </a>
                `).join('');
            }
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
    </script>
    <script src="js/search.js"></script>
    <script src="js/mobile-menu.js"></script>
    <script src="js/auth.js"></script>

    <!-- Chatbot Widget -->
    <link rel="stylesheet" href="css/chatbot-widget.css">
    <script src="js/chatbot-widget.js" defer></script>
</body>

</html>